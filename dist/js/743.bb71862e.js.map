{"version":3,"file":"js/743.bb71862e.js","mappings":"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","sources":["webpack://ever-wall/./src/components/LoginLogout.vue","webpack://ever-wall/src/components/LoginLogout.vue","webpack://ever-wall/./src/components/LoginLogout.vue?1b89","webpack://ever-wall/./src/components/LoginLogout.vue?fc45","webpack://ever-wall/./src/views/WallView.vue","webpack://ever-wall/./src/views/WallView.vue?5122","webpack://ever-wall/./src/views/WallView.vue?2898","webpack://ever-wall/./src/views/WallView.vue?d35d"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',[_c('nav',{staticClass:\"text-right mt-2\",staticStyle:{\"text-align\":\"right\"}},[_c('span',{staticClass:\"btn-link text-primary\",staticStyle:{\"cursor\":\"pointer\",\"padding-right\":\"2em\"},on:{\"click\":function($event){return _vm._loginLogout()}}},[_vm._v(_vm._s(_vm.ls))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <nav class=\"text-right mt-2\" style=\"text-align: right\">\n      <span\n        @click=\"_loginLogout()\"\n        class=\"btn-link text-primary\"\n        style=\"cursor: pointer; padding-right: 2em\"\n        >{{ ls }}</span\n      >\n    </nav>\n  </div>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport { authState, login, logout } from \"@/api\";\n\nexport default Vue.extend({\n  name: \"LoginLogout\",\n  props: ['authProp'],\n  data() {\n    return {\n      ls: null,\n    };\n  },\n  methods: {\n    //needed for monitoring the state of the user from other components\n    async authorization() {\n       const auth = await authState();\n       this.ls = auth === false ? \"Connect\" : `${auth.slice(0, 6)}...${auth.slice(62)} âŽ†`;      \n    },\n    async _loginLogout() {\n      if ((await authState()) === false) {\n        await login();\n        await this.authorization();\n      } else {\n        logout().then(() => {\n          this.ls = \"Connect\";\n        });\n      }\n    },\n  },\n  async created() {\n    await this.authorization()\n  },\n  watch: {\n    authProp: function (){\n      this.authorization();\n    }\n  }\n});\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LoginLogout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LoginLogout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoginLogout.vue?vue&type=template&id=73f04b46&\"\nimport script from \"./LoginLogout.vue?vue&type=script&lang=js&\"\nexport * from \"./LoginLogout.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',[_c('div',[_c('LoginLogout',{attrs:{\"authProp\":_vm.authTrigger}})],1),_c('nav',{staticClass:\"text-center mt-1\"},[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"Home\")])],1),_c('div',{staticClass:\"container mt-5\"},[_c('div',{staticClass:\"text-primary\"},[_vm._v(\"Wall address: \"+_vm._s(this.$route.params.chatAddress))]),_c('b-form',{staticClass:\"mt-3\"},[_c('b-form-group',[_c('b-form-textarea',{staticClass:\"mt-3 mb-3\",attrs:{\"placeholder\":\"Write something ... \"},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}})],1),_c('b-button',{attrs:{\"variant\":\"outline-primary\"},on:{\"click\":function($event){return _vm.submit()}}},[_vm._v(\"submit\"),(_vm.loader)?_c('b-spinner',{staticStyle:{\"margin-left\":\"0.3em\"},attrs:{\"small\":\"\"}}):_vm._e()],1)],1),_c('b-list-group',{staticClass:\"mt-5\"},_vm._l((_vm.posts),function(post){return _c('b-list-group-item',{key:post.message},[_c('div',[_vm._v(_vm._s(post.message))]),_c('br'),_c('div',{staticClass:\"text-secondary d-flex justify-content-between\"},[_c('div',[_vm._v(\"From: \"+_vm._s(post.sender.slice(0,6) + '...'+ post.sender.slice(62)))]),_c('div',[_c('a',{attrs:{\"href\":'./#/post/' + post.id}},[_vm._v(\" \"+_vm._s(new Date(post.timestamp * 1000).toLocaleDateString(\"ru-RU\") + ' ' + new Date(post.timestamp * 1000).toLocaleTimeString(\"en-US\"))+\" \")])])])])}),1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from 'vue';\nimport {sendMessage, getPosts} from '@/api';\nimport LoginLogout from '@/components/LoginLogout.vue'; \n\nexport default Vue.extend({\n  name: 'WallView',\n  props: {\n    msg: String,\n  },\n  data() {\n    return {\n      message: '',\n      posts: [],\n      authTrigger: false,\n      loader: false\n    };\n  },\n  methods: {\n    async submit() {\n      this.loader = true;\n      if(this.message === '') {\n        alert('Please, write something');        \n         this.loader = false;\n        return;\n      }\n      sendMessage(this.message, this.$route.params.chatAddress).then(() => {\n       \n        this.authTrigger= this.authTrigger ? false : true;\n        this.message = '';\n        //refresh posts\n       getPosts(this.$route.params.chatAddress).then(posts => {\n        if(typeof posts === 'undefined'){\n          alert('Something went wrong');\n        }else{\n         this.posts = posts;\n         this.loader = false;\n        }\n       });       \n      });\n    },\n  },\n  async mounted() {\n    this.posts = await getPosts(this.$route.params.chatAddress);\n    console.log(this.posts);\n  },\n  components:{\n    LoginLogout\n  }\n});\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WallView.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WallView.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./WallView.vue?vue&type=template&id=4b41844f&\"\nimport script from \"./WallView.vue?vue&type=script&lang=ts&\"\nexport * from \"./WallView.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","_setupProxy","staticClass","staticStyle","on","$event","_loginLogout","_v","_s","ls","staticRenderFns","name","props","data","methods","logout","watch","authProp","component","attrs","authTrigger","$route","params","chatAddress","model","value","message","callback","$$v","expression","submit","loader","_e","_l","posts","post","key","sender","slice","id","Date","timestamp","toLocaleDateString","toLocaleTimeString","Vue","msg","String","async","alert","sendMessage","then","getPosts","console","log","components","LoginLogout"],"sourceRoot":""}